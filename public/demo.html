<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ask Nora for a Quote • Cinematic Videographers</title>
  <meta name="color-scheme" content="dark light" />

  <style>
    :root{
      --bg: #0b1217;
      --bg-grad: radial-gradient(1200px 600px at 50% -10%, #12202b 0%, #0b1217 50%, #0b1217 100%);
      --card: #111a22;
      --ring: rgba(255,255,255,.08);
      --text: #e9f2f8;
      --muted: #9fb3c1;
      --brand: #0ea5e9; /* accent for focus rings */
      --radius: 18px;
      --shadow: 0 10px 35px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.02);
    }

    /* Page shell */
    html, body {height: 100%;}
    body{
      margin:0;
      color:var(--text);
      background: var(--bg);
      background-image: var(--bg-grad);
      font: 400 16px/1.55 system-ui, -apple-system, "Segoe UI", Roboto, Inter, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: clamp(16px, 2vw, 28px);
    }
    header{
      text-align:center;
      margin: 18px 0 8px;
    }
    .logo{
      height: 44px;
      width:auto;
      object-fit: contain;
      filter: drop-shadow(0 2px 12px rgba(0,0,0,.35));
    }
    h1{
      margin: 18px 0 6px;
      font-size: clamp(28px, 2.8vw, 36px);
      line-height: 1.15;
      font-weight: 700;
      letter-spacing:.2px;
      text-align:center;
    }
    .sub{
      text-align:center;
      color: var(--muted);
      font-size: clamp(14px, 1.7vw, 16px);
      margin-bottom: 18px;
    }

    /* Card that holds the open chat */
    .card{
      position: relative;
      margin: 22px auto 48px;
      width: min(100%, 980px);
      /* keep the exact “placeholder” look/size but responsive */
      height: clamp(420px, 70vh, 640px);
      background: linear-gradient(180deg, #0f1a22, #0d171f);
      border: 1px solid var(--ring);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    /* Where we mount the live chat window */
    #nora-host{
      position:absolute; inset:14px;
      border-radius: calc(var(--radius) - 10px);
      background: #0d171f;
    }

    /* --- Embed hardening: keep chat open, centered, and full-size --- */
    /* Hide any floating bubble UI the embed might add */
    .nora-bubble,[data-nora-bubble],[aria-label="Open chat"],.chat-bubble{display:none!important;}

    /* Force the chat window to fill the host area */
    #nora-host > div,
    #nora-host .nora-panel,
    #nora-host .nora-window,
    #nora-host [data-nora-panel]{
      position:absolute !important;
      inset:0 !important;
      width:100% !important;
      height:100% !important;
      max-width:none !important;
      max-height:none !important;
      transform:none !important;
      left:0 !important; top:0 !important; right:0 !important; bottom:0 !important;
      border-radius: inherit !important;
    }

    /* Focus rings for any inputs inside chat */
    #nora-host input:focus, #nora-host textarea:focus, #nora-host button:focus{
      outline: 2px solid var(--brand) !important;
      outline-offset: 2px !important;
    }

    footer{
      color:var(--muted);
      text-align:center;
      font-size: 13px;
      margin: 8px 0 32px;
    }

    @media (max-width: 520px){
      .card{height: min(72vh, 560px);}
      header{margin-top:10px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <!-- Upload your logo to: /public/cv-logo.png -->
      <img class="logo" src="/cv-logo.png" alt="Cinematic Videographers" onerror="this.style.display='none'">
    </header>

    <h1>Ask Nora for a Quote</h1>
    <p class="sub">Our AI assistant that generates instant videography quotes for your clients.</p>

    <!-- Chat placeholder card (the chat will fill this area) -->
    <section class="card" aria-label="Nora chat container">
      <div id="nora-host"></div>
    </section>

    <footer>© Cinematic Videographers · Nora Assistant</footer>
  </div>

  <!-- Nora configuration: keep keys server-side; front-end only passes safe flags -->
  <script>
    /* The embed script reads this but never exposes secrets. */
    window.NORA_CONFIG = {
      /* Force the chat to open immediately (no bubble) */
      autoOpen: true,
      /* Tell Nora to format all dates as dd/mm/yyyy */
      dateFormat: "dd/MM/yyyy",
      /* Optional: a compact header title Nora can use */
      title: "Nora — Cinematic Videographers",
      /* Mark that we’re embedding inside a page region, not bottom-right bubble */
      embedMode: "host"
    };
  </script>

  <!-- Load your Nora chat bundle from /public (already in your repo) -->
  <script src="/nora-chat.js" defer></script>

<script>
  (function mountIntoHost(){
    const host = document.getElementById('nora-host');

    // Function to locate the chat window Nora inserts
    function findPanel(){
      return document.querySelector('.nora-panel, .nora-window, [data-nora-panel]');
    }

    // Re-mount chat into the host div once it appears
    const observer = new MutationObserver(() => {
      const panel = findPanel();
      if (panel && !host.contains(panel)) {
        host.appendChild(panel);
        Object.assign(panel.style, {
          position: 'absolute',
          inset: '0',
          width: '100%',
          height: '100%',
          borderRadius: 'inherit',
          transform: 'none'
        });
      }
    });
    observer.observe(document.body, { childList: true, subtree: true });

    // Force chat open on load
    window.addEventListener('load', () => {
      if (window.NoraChat && typeof NoraChat.open === 'function') {
        NoraChat.open({ dateFormat: 'dd/MM/yyyy' });
      } else if (window.noraChat && typeof noraChat.open === 'function') {
        noraChat.open({ dateFormat: 'dd/MM/yyyy' });
      }
    });
  })();
</script>
</body>
</html>
